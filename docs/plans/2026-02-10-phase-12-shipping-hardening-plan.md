# Phase 12 Shipping Hardening Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Harden MotionForge for offline-friendly export, stable migrations, recovery UX, and release automation while keeping web-first architecture and gate green.

**Architecture:** Keep the existing modular store/utility approach; add focused helpers for export core resolution/caching, project migrations, and recovery control paths. Avoid large refactors and preserve dry-run loading guarantees.

**Tech Stack:** React 19, TypeScript, Vite, Three.js, Vitest, GitHub Actions.

---

### Task 1: Export hardening (12.1)
- Add ffmpeg core URL strategy + cache-backed warmup path.
- Add export lifecycle cleanup helper and PNG-sequence zip fallback.
- Improve progress phases and estimated export time UI.
- Add tests for core path resolution and cancel cleanup helper.

### Task 2: Performance/bundle hygiene (12.2)
- Lazy-load heavy viewport and export module paths.
- Add manual chunk strategy in Vite for Three/ffmpeg split.
- Extend renderer stats with FPS and wire overlay.
- Update README + ARCHITECTURE perf section.

### Task 3: Explicit migrations + diagnostics (12.3)
- Add pure migration pipeline (v1->v2->v3->v4) in engine.
- Parse path becomes migrate -> validate.
- Keep deserializer dry-run stage unchanged and add invalid migrated input test.
- Add Project Diagnostics modal in TopBar.

### Task 4: Error boundary + safe mode + confirms (12.4)
- Add app-level ErrorBoundary recovery UI.
- Add safe mode detection (`?safe=1`) and viewport gating.
- Add purge confirm wrapper with test proving no mutation before confirmation.

### Task 5: Release workflow and docs (12.5)
- Upgrade tag workflow to create GitHub Release with autogenerated notes.
- Attach dist zip + version metadata artifact.
- Update RELEASE.md and README release section with verification steps and no npm publish note.
